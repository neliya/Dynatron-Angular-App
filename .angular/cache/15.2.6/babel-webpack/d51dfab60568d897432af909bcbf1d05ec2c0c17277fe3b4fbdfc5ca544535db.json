{"ast":null,"code":"import { finalize } from 'rxjs';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { MatPaginator } from '@angular/material/paginator';\nimport { MatSort } from '@angular/material/sort';\nimport * as _ from 'lodash';\nimport { EditCustomerDialogComponent } from '../edit-customer-dialog/edit-customer-dialog.component';\nimport { ConfirmationDialogComponent } from '../../confirmation-dialog/confirmation-dialog.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/customer.service\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/table\";\nimport * as i6 from \"@angular/material/sort\";\nimport * as i7 from \"@angular/material/form-field\";\nimport * as i8 from \"@angular/material/input\";\nimport * as i9 from \"@angular/material/paginator\";\nimport * as i10 from \"@angular/material/progress-bar\";\nimport * as i11 from \"@angular/flex-layout/flex\";\nimport * as i12 from \"@angular/material/icon\";\nimport * as i13 from \"@angular/material/button\";\nfunction CustomerListComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"mat-progress-bar\", 20);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CustomerListComponent_mat_hint_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-hint\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r1.shouldShowText());\n  }\n}\nfunction CustomerListComponent_mat_header_cell_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 22);\n    i0.ɵɵtext(1, \"User Id\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CustomerListComponent_mat_cell_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r15 = ctx.index;\n    i0.ɵɵstyleProp(\"color\", \"black\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i_r15 + 1, \" \");\n  }\n}\nfunction CustomerListComponent_mat_header_cell_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 22);\n    i0.ɵɵtext(1, \"First Name\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CustomerListComponent_mat_cell_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const data_r16 = ctx.$implicit;\n    i0.ɵɵstyleProp(\"color\", \"black\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", data_r16.firstName, \" \");\n  }\n}\nfunction CustomerListComponent_mat_header_cell_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 22);\n    i0.ɵɵtext(1, \"Last Name\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CustomerListComponent_mat_cell_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const data_r17 = ctx.$implicit;\n    i0.ɵɵstyleProp(\"color\", \"black\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", data_r17.lastName, \" \");\n  }\n}\nfunction CustomerListComponent_mat_header_cell_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 22);\n    i0.ɵɵtext(1, \"Email\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CustomerListComponent_mat_cell_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const data_r18 = ctx.$implicit;\n    i0.ɵɵstyleProp(\"color\", \"black\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", data_r18.email, \" \");\n  }\n}\nfunction CustomerListComponent_mat_header_cell_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 22);\n    i0.ɵɵtext(1, \"Phone\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CustomerListComponent_mat_cell_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function CustomerListComponent_mat_cell_27_Template_button_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r21);\n      const data_r19 = restoredCtx.$implicit;\n      const ctx_r20 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r20.openEditCustomerDialog(data_r19));\n    });\n    i0.ɵɵelementStart(3, \"mat-icon\", 24);\n    i0.ɵɵtext(4, \"edit\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function CustomerListComponent_mat_cell_27_Template_button_click_5_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r21);\n      const data_r19 = restoredCtx.$implicit;\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.deleteCustomer(data_r19));\n    });\n    i0.ɵɵelementStart(6, \"mat-icon\");\n    i0.ɵɵtext(7, \"delete\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const data_r19 = ctx.$implicit;\n    i0.ɵɵstyleProp(\"color\", \"black\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", data_r19.phone, \" \");\n  }\n}\nfunction CustomerListComponent_mat_header_row_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-header-row\", 26);\n  }\n}\nfunction CustomerListComponent_mat_row_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-row\");\n  }\n}\nconst _c0 = function () {\n  return [20, 40, 60];\n};\nconst MIN_CHAR_REQUIRED_FOR_SEARCH = 2;\nexport class CustomerListComponent {\n  constructor(customerService, dialog, router) {\n    this.customerService = customerService;\n    this.dialog = dialog;\n    this.router = router;\n    this.customers = [];\n    this.isLoading = true;\n    this.searchedText = '';\n    this.sort = new MatSort();\n    this.dataColumns = ['id', 'firstName', 'lastName', 'email', 'phone'];\n    this.dataSource = new MatTableDataSource();\n  }\n  ngOnInit() {\n    this.getCustomers();\n  }\n  getCustomers() {\n    this.customerService.getAllCustomers().pipe(finalize(() => {\n      this.isLoading = false;\n    })).subscribe({\n      next: customers => {\n        this.setupTable();\n        this.dataSource.data = _.sortBy(customers, user => user.lastName);\n        this.customers = customers;\n      },\n      error: response => {\n        console.log(response);\n      }\n    });\n  }\n  setupTable() {\n    this.dataSource.paginator = this.paginator;\n    this.dataSource.sort = this.sort;\n  }\n  applyfilter(filterValue) {\n    const searchVal = filterValue.currentTarget.value;\n    this.searchedText = searchVal;\n    if (searchVal?.length >= MIN_CHAR_REQUIRED_FOR_SEARCH) {\n      this.dataSource.filter = searchVal;\n    } else {\n      this.dataSource.filter = '';\n    }\n  }\n  shouldShowChar() {\n    if (this.searchedText === null || this.searchedText === undefined || this.searchedText?.length < MIN_CHAR_REQUIRED_FOR_SEARCH) {\n      return true;\n    }\n    return false;\n  }\n  shouldShowText() {\n    if (this.searchedText === null || this.searchedText === undefined || this.searchedText?.length === 0) {\n      return `${MIN_CHAR_REQUIRED_FOR_SEARCH} characters required for search`;\n    } else if (this.searchedText?.length > 0 && this.searchedText?.length < MIN_CHAR_REQUIRED_FOR_SEARCH) {\n      return `${MIN_CHAR_REQUIRED_FOR_SEARCH - this.searchedText?.length} more characters required for search`;\n    }\n    return '';\n  }\n  openEditCustomerDialog(editedCustomer) {\n    const customerData = {\n      id: editedCustomer.id,\n      firstName: editedCustomer.firstName,\n      lastName: editedCustomer.lastName,\n      phone: editedCustomer.phone,\n      email: editedCustomer.email\n    };\n    this.dialog.open(EditCustomerDialogComponent, {\n      data: customerData,\n      width: '400px',\n      height: 'auto',\n      maxWidth: '100%',\n      backdropClass: 'backdropBackground' // This is the \"wanted\" line\n    });\n  }\n\n  deleteCustomer(data) {\n    const options = {\n      title: `Delete ${data.firstName + ' ' + data.lastName}?`,\n      subTitle: 'Do you want to delete the selected customer?',\n      buttons: [{\n        title: 'Yes',\n        value: 'true',\n        type: 'destructive'\n      }],\n      showCancelButton: true,\n      cancelButtonTitle: 'Cancel'\n    };\n    this.dialog.open(ConfirmationDialogComponent, {\n      data: options\n    }).afterClosed().subscribe(response => {\n      this.customerService.deleteCustomer(data.id).subscribe({\n        next: response => {\n          this.getCustomers();\n          this.router.navigate(['/customers']);\n        }\n      });\n    });\n  }\n}\nCustomerListComponent.ɵfac = function CustomerListComponent_Factory(t) {\n  return new (t || CustomerListComponent)(i0.ɵɵdirectiveInject(i1.CustomerService), i0.ɵɵdirectiveInject(i2.MatDialog), i0.ɵɵdirectiveInject(i3.Router));\n};\nCustomerListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CustomerListComponent,\n  selectors: [[\"app-customer-list\"]],\n  viewQuery: function CustomerListComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(MatPaginator, 7);\n      i0.ɵɵviewQuery(MatSort, 7);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.sort = _t.first);\n    }\n  },\n  decls: 31,\n  vars: 9,\n  consts: [[4, \"ngIf\"], [1, \"container\", \"my-5\", 3, \"hidden\"], [1, \"primary-800\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"space-between center\", 1, \"\"], [1, \"mb-0\"], [1, \"filter-input\"], [\"matInput\", \"\", \"autocomplete\", \"off\", \"placeholder\", \"Filter Users\", 3, \"keyup\"], [\"style\", \"font-style: italic; font-size: 10px;\", 4, \"ngIf\"], [1, \"mat-elevation-z1\"], [\"matSort\", \"\", 1, \"table-size\", 3, \"dataSource\"], [\"matColumnDef\", \"id\"], [\"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [3, \"color\", 4, \"matCellDef\"], [\"matColumnDef\", \"firstName\"], [\"matColumnDef\", \"lastName\"], [\"matColumnDef\", \"email\"], [\"matColumnDef\", \"phone\"], [\"style\", \"background-color: #7e6ccb;\", 4, \"matHeaderRowDef\", \"matHeaderRowDefSticky\"], [4, \"matRowDef\", \"matRowDefColumns\"], [\"showFirstLastButtons\", \"\", 2, \"background-color\", \"#7e6ccb\", 3, \"pageSizeOptions\"], [\"mode\", \"indeterminate\"], [2, \"font-style\", \"italic\", \"font-size\", \"10px\"], [\"mat-sort-header\", \"\"], [\"mat-icon-button\", \"\", 3, \"click\"], [2, \"color\", \"#7e6ccb\"], [\"mat-icon-button\", \"\", 2, \"color\", \"#7e6ccb\", 3, \"click\"], [2, \"background-color\", \"#7e6ccb\"]],\n  template: function CustomerListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, CustomerListComponent_div_0_Template, 2, 0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"h1\", 4);\n      i0.ɵɵtext(5, \"Members\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(6, \"div\")(7, \"div\")(8, \"mat-form-field\", 5)(9, \"input\", 6);\n      i0.ɵɵlistener(\"keyup\", function CustomerListComponent_Template_input_keyup_9_listener($event) {\n        return ctx.applyfilter($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(10, CustomerListComponent_mat_hint_10_Template, 2, 1, \"mat-hint\", 7);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(11, \"div\", 8)(12, \"mat-table\", 9);\n      i0.ɵɵelementContainerStart(13, 10);\n      i0.ɵɵtemplate(14, CustomerListComponent_mat_header_cell_14_Template, 2, 0, \"mat-header-cell\", 11);\n      i0.ɵɵtemplate(15, CustomerListComponent_mat_cell_15_Template, 2, 3, \"mat-cell\", 12);\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵelementContainerStart(16, 13);\n      i0.ɵɵtemplate(17, CustomerListComponent_mat_header_cell_17_Template, 2, 0, \"mat-header-cell\", 11);\n      i0.ɵɵtemplate(18, CustomerListComponent_mat_cell_18_Template, 2, 3, \"mat-cell\", 12);\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵelementContainerStart(19, 14);\n      i0.ɵɵtemplate(20, CustomerListComponent_mat_header_cell_20_Template, 2, 0, \"mat-header-cell\", 11);\n      i0.ɵɵtemplate(21, CustomerListComponent_mat_cell_21_Template, 2, 3, \"mat-cell\", 12);\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵelementContainerStart(22, 15);\n      i0.ɵɵtemplate(23, CustomerListComponent_mat_header_cell_23_Template, 2, 0, \"mat-header-cell\", 11);\n      i0.ɵɵtemplate(24, CustomerListComponent_mat_cell_24_Template, 2, 3, \"mat-cell\", 12);\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵelementContainerStart(25, 16);\n      i0.ɵɵtemplate(26, CustomerListComponent_mat_header_cell_26_Template, 2, 0, \"mat-header-cell\", 11);\n      i0.ɵɵtemplate(27, CustomerListComponent_mat_cell_27_Template, 8, 3, \"mat-cell\", 12);\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵtemplate(28, CustomerListComponent_mat_header_row_28_Template, 1, 0, \"mat-header-row\", 17);\n      i0.ɵɵtemplate(29, CustomerListComponent_mat_row_29_Template, 1, 0, \"mat-row\", 18);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(30, \"mat-paginator\", 19);\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"hidden\", ctx.isLoading);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngIf\", ctx.shouldShowChar());\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"dataSource\", ctx.dataSource);\n      i0.ɵɵadvance(16);\n      i0.ɵɵproperty(\"matHeaderRowDef\", ctx.dataColumns)(\"matHeaderRowDefSticky\", true);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"matRowDefColumns\", ctx.dataColumns);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"pageSizeOptions\", i0.ɵɵpureFunction0(8, _c0));\n    }\n  },\n  dependencies: [i4.NgIf, i5.MatTable, i5.MatHeaderCellDef, i5.MatHeaderRowDef, i5.MatColumnDef, i5.MatCellDef, i5.MatRowDef, i5.MatHeaderCell, i5.MatCell, i5.MatHeaderRow, i5.MatRow, i6.MatSort, i6.MatSortHeader, i7.MatFormField, i7.MatHint, i8.MatInput, i9.MatPaginator, i10.MatProgressBar, i11.DefaultLayoutDirective, i11.DefaultLayoutAlignDirective, i12.MatIcon, i13.MatIconButton],\n  styles: [\".mat-header-cell[_ngcontent-%COMP%]{\\n    display: flex;\\n    justify-content: center;\\n}\\n\\ntable[_ngcontent-%COMP%]{\\n    width: 100%;\\n}\\n\\n.mat-column-id[_ngcontent-%COMP%]{\\n    max-width: 200px;\\n}\\n\\n.mat-cell[_ngcontent-%COMP%]{\\n    justify-content: center;\\n}\\n\\n.mat-card-content[_ngcontent-%COMP%]{\\n    padding-left: 10px;\\n}\\n\\n.table-size[_ngcontent-%COMP%]{\\n    height: calc(100vh - 220px);\\n    overflow: auto;\\n    background-color: #fff;\\n}\\n\\n.mat-form-field[_ngcontent-%COMP%]{\\n    margin-top: 200px;\\n}\\n\\n.no-wrap[_ngcontent-%COMP%] {\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    white-space: nowrap;\\n  }\\n\\n  .filter-input[_ngcontent-%COMP%]{\\n    margin-top: 20px; \\n    margin-bottom: 10px;\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9jdXN0b21lcnMvY3VzdG9tZXItbGlzdC9jdXN0b21lci1saXN0LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxhQUFhO0lBQ2IsdUJBQXVCO0FBQzNCOztBQUVBO0lBQ0ksV0FBVztBQUNmOztBQUVBO0lBQ0ksZ0JBQWdCO0FBQ3BCOztBQUVBO0lBQ0ksdUJBQXVCO0FBQzNCOztBQUVBO0lBQ0ksa0JBQWtCO0FBQ3RCOztBQUVBO0lBQ0ksMkJBQTJCO0lBQzNCLGNBQWM7SUFDZCxzQkFBc0I7QUFDMUI7O0FBRUE7SUFDSSxpQkFBaUI7QUFDckI7O0FBRUE7SUFDSSxnQkFBZ0I7SUFDaEIsdUJBQXVCO0lBQ3ZCLG1CQUFtQjtFQUNyQjs7RUFFQTtJQUNFLGdCQUFnQjtJQUNoQixtQkFBbUI7RUFDckIiLCJzb3VyY2VzQ29udGVudCI6WyIubWF0LWhlYWRlci1jZWxse1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbnRhYmxle1xuICAgIHdpZHRoOiAxMDAlO1xufVxuXG4ubWF0LWNvbHVtbi1pZHtcbiAgICBtYXgtd2lkdGg6IDIwMHB4O1xufVxuXG4ubWF0LWNlbGx7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbi5tYXQtY2FyZC1jb250ZW50e1xuICAgIHBhZGRpbmctbGVmdDogMTBweDtcbn1cblxuLnRhYmxlLXNpemV7XG4gICAgaGVpZ2h0OiBjYWxjKDEwMHZoIC0gMjIwcHgpO1xuICAgIG92ZXJmbG93OiBhdXRvO1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG59XG5cbi5tYXQtZm9ybS1maWVsZHtcbiAgICBtYXJnaW4tdG9wOiAyMDBweDtcbn1cblxuLm5vLXdyYXAge1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgfVxuXG4gIC5maWx0ZXItaW5wdXR7XG4gICAgbWFyZ2luLXRvcDogMjBweDsgXG4gICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgfSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["finalize","MatTableDataSource","MatPaginator","MatSort","_","EditCustomerDialogComponent","ConfirmationDialogComponent","i0","MIN_CHAR_REQUIRED_FOR_SEARCH","CustomerListComponent","constructor","customerService","dialog","router","ngOnInit","getCustomers","getAllCustomers","pipe","isLoading","subscribe","next","customers","setupTable","dataSource","data","sortBy","user","lastName","error","response","console","log","paginator","sort","applyfilter","filterValue","searchVal","currentTarget","value","searchedText","length","filter","shouldShowChar","undefined","shouldShowText","openEditCustomerDialog","editedCustomer","customerData","id","firstName","phone","email","open","width","height","maxWidth","backdropClass","deleteCustomer","options","title","subTitle","buttons","type","showCancelButton","cancelButtonTitle","afterClosed","navigate","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["/Users/Neli/final-project/angular-app/src/app/components/customers/customer-list/customer-list.component.ts","/Users/Neli/final-project/angular-app/src/app/components/customers/customer-list/customer-list.component.html"],"sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\nimport { Observable, finalize } from 'rxjs';\nimport { Customer } from 'src/app/models/customer.model';\nimport { CustomerService } from 'src/app/services/customer.service';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { MatPaginator } from '@angular/material/paginator';\nimport { MatSort } from '@angular/material/sort';\nimport * as _ from 'lodash';\nimport { MAT_DIALOG_DATA, MatDialogRef, MatDialog } from '@angular/material/dialog';\nimport { EditCustomerDialogComponent, EditCustomerDialogData } from '../edit-customer-dialog/edit-customer-dialog.component';\nimport { Router } from '@angular/router';\nimport { ConfirmDialogOptions, ConfirmationDialogComponent } from '../../confirmation-dialog/confirmation-dialog.component';\n\n\nconst MIN_CHAR_REQUIRED_FOR_SEARCH = 2;\n\n@Component({\n  selector: 'app-customer-list',\n  templateUrl: './customer-list.component.html',\n  styleUrls: ['./customer-list.component.css']\n})\nexport class CustomerListComponent implements OnInit{\n\n  customers: Customer[]=[];\n  isLoading = true;\n  searchedText = '';\n\n  constructor(public customerService: CustomerService, public dialog: MatDialog, private router: Router){}\n\n  @ViewChild(MatPaginator, { static: true })\n  paginator!: MatPaginator;\n  @ViewChild(MatSort, { static: true })sort: MatSort = new MatSort;\n\n  dataColumns = ['id','firstName', 'lastName','email','phone'];\n  dataSource = new MatTableDataSource<object>();\n  ngOnInit(): void{\n    this.getCustomers();\n  }\n\n  getCustomers(): void{\n    this.customerService.getAllCustomers()\n    .pipe(\n      finalize(() => {\n        this.isLoading = false;\n      })\n    )\n    .subscribe({\n      next: (customers) => {\n        this.setupTable();\n        this.dataSource.data = _.sortBy(customers, (user: Customer) => user.lastName);\n        this.customers = customers;\n      },\n      error: (response) =>{\n        console.log(response)\n      }\n    })\n  }\n\n  setupTable(): void{\n    this.dataSource.paginator = this.paginator;\n    this.dataSource.sort = this.sort;\n  }\n\n  applyfilter(filterValue: any): void{\n    const searchVal = filterValue.currentTarget.value;\n    this.searchedText = searchVal;\n    if(searchVal?.length >= MIN_CHAR_REQUIRED_FOR_SEARCH){\n      this.dataSource.filter = searchVal;\n    }else{\n      this.dataSource.filter = '';\n    }\n  }\n\n  shouldShowChar(): boolean{\n    if(this.searchedText === null || this.searchedText === undefined || this.searchedText?.length < MIN_CHAR_REQUIRED_FOR_SEARCH){\n      return true;\n    }\n    return false;\n  }\n\n  shouldShowText(): string{\n    if (this.searchedText === null || this.searchedText === undefined || this.searchedText?.length === 0){\n      return `${MIN_CHAR_REQUIRED_FOR_SEARCH} characters required for search`;\n    } else if (this.searchedText?.length > 0 && this.searchedText?.length < MIN_CHAR_REQUIRED_FOR_SEARCH){\n      return `${MIN_CHAR_REQUIRED_FOR_SEARCH - this.searchedText?.length} more characters required for search`;\n    }\n    return '';\n  }\n\n  openEditCustomerDialog(editedCustomer: Customer): void{\n    const customerData: EditCustomerDialogData = {\n      id: editedCustomer.id,\n      firstName: editedCustomer.firstName,\n      lastName: editedCustomer.lastName,\n      phone: editedCustomer.phone,\n      email: editedCustomer.email,\n    }\n    this.dialog.open(EditCustomerDialogComponent,{\n      data: customerData,\n      width: '400px',\n      height: 'auto',\n      maxWidth: '100%',\n      backdropClass: 'backdropBackground' // This is the \"wanted\" line\n    })\n  }\n\n  deleteCustomer(data: Customer){\n    const options: ConfirmDialogOptions = {\n      title: `Delete ${data.firstName + ' ' + data.lastName}?`,\n      subTitle: 'Do you want to delete the selected customer?',\n      buttons:[\n        {\n          title: 'Yes',\n          value: 'true',\n          type: 'destructive',\n        }\n      ],\n      showCancelButton: true,\n      cancelButtonTitle: 'Cancel',\n    };\n\n    this.dialog.open(\n      ConfirmationDialogComponent, \n      {data: options})\n    .afterClosed()\n    .subscribe((response: Customer) => {\n      this.customerService.deleteCustomer(data.id).subscribe({\n        next: (response) => {\n          this.getCustomers();\n          this.router.navigate(['/customers']);\n        }\n      });\n  })\n  }\n}\n","\n<div *ngIf=\"isLoading\">\n    <mat-progress-bar mode=\"indeterminate\"></mat-progress-bar>\n</div>\n<div [hidden]=\"isLoading\" class=\"container my-5\">\n    <div class=\"px-32 w-100-p\" class=\"primary-800\">\n        <div class fxLayout=\"row\" fxLayoutAlign=\"space-between center\">\n            <h1 class=\"mb-0\">Members</h1>\n        </div>\n    </div>\n    <div>\n        <div>\n            <mat-form-field class=\"filter-input\">\n                <input matInput autocomplete=\"off\" (keyup)=\"applyfilter($event)\" placeholder=\"Filter Users\" />\n                <mat-hint *ngIf=\"shouldShowChar()\" style=\"font-style: italic; font-size: 10px;\">{{ shouldShowText() }}</mat-hint>\n            </mat-form-field>\n        </div>\n        <div class=\"mat-elevation-z1\">\n            <mat-table [dataSource]=\"dataSource\" matSort class=\"table-size\">\n                <ng-container matColumnDef=\"id\">\n                    <mat-header-cell *matHeaderCellDef mat-sort-header>User Id</mat-header-cell>\n                    <mat-cell [style.color]=\"'black'\" *matCellDef=\"let element; let i = index\">\n                        {{ i +1 }}\n                    </mat-cell>\n                </ng-container>\n                <ng-container matColumnDef=\"firstName\">\n                    <mat-header-cell *matHeaderCellDef mat-sort-header>First Name</mat-header-cell>\n                    <mat-cell [style.color]=\"'black'\" *matCellDef=\"let data\">\n                        {{ data.firstName}}\n                    </mat-cell>\n                </ng-container>\n                <ng-container matColumnDef=\"lastName\">\n                    <mat-header-cell *matHeaderCellDef mat-sort-header>Last Name</mat-header-cell>\n                    <mat-cell [style.color]=\"'black'\" *matCellDef=\"let data\">\n                        {{ data.lastName}}\n                    </mat-cell>\n                </ng-container>\n                <ng-container matColumnDef=\"email\">\n                    <mat-header-cell *matHeaderCellDef mat-sort-header>Email</mat-header-cell>\n                    <mat-cell [style.color]=\"'black'\" *matCellDef=\"let data\">\n                        {{ data.email}}\n                    </mat-cell>\n                </ng-container>\n                <ng-container matColumnDef=\"phone\">\n                    <mat-header-cell *matHeaderCellDef mat-sort-header>Phone</mat-header-cell>\n                    <mat-cell [style.color]=\"'black'\" *matCellDef=\"let data\">\n                        {{ data.phone}}\n                        <button mat-icon-button (click)=\"openEditCustomerDialog(data)\">\n                            <mat-icon style=\"color: #7e6ccb\" >edit</mat-icon>\n                            </button>\n                            <button mat-icon-button (click)=\"deleteCustomer(data)\" style=\"color: #7e6ccb\"><mat-icon  >delete</mat-icon>\n                        </button>\n                    </mat-cell>\n                </ng-container>\n                <mat-header-row *matHeaderRowDef=\"dataColumns; sticky: true\" style=\"background-color: #7e6ccb;\"></mat-header-row>\n                <mat-row *matRowDef=\"let row; columns: dataColumns\"></mat-row>\n            </mat-table>\n            <mat-paginator [pageSizeOptions]=\"[20,40,60]\" showFirstLastButtons style=\"background-color: #7e6ccb;\"></mat-paginator>\n        </div>\n    </div>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}